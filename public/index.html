<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Drag & Drop</title>
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>👋</text></svg>"
    />
    <link href="/style.css" rel="stylesheet" />
  </head>

  <body>
    <main class="flex h-full gap-4"></main>
    <footer
      class="fixed bottom-0 px-2 py-1 text-center text-white bg-purple-600 rounded-t"
      style="
        left: calc(50% - 200px);
        right: calc(50% - 200px);
        font-variant: small-caps;
      "
    >
      made with 💻 by
      <a
        class="mx-1 font-bold"
        href="https://twitter.com/vdsabev"
        target="_blank"
      >
        @vdsabev
      </a>
    </footer>

    <script type="importmap">
      {
        "imports": {
          "htm": "/lib/htm.js",
          "overstate": "/lib/overstate/store.js",
          "html": "/src/html.js"
        }
      }
    </script>
    <script type="module">
      import html from 'html';
      import { createStore } from 'overstate';

      import Board from './src/Board.js';

      const store = createStore({
        board: {
          _id: '6519418024dcd715e1b25f5f',
          lanes: [
            {
              _id: '651952a7e8b0a1d2519bf4bb',
              name: '⛏️ To Do',
              tasks: [
                { _id: '6519418024dcd715e1b25f1f', text: 'Ignore haters 👊' },
                { _id: '6519418024dcd715e1b25f2f', text: 'Post dank memes 🫡' },
              ],
            },
            {
              _id: '651952a7e8b0a1d2519bf4bc',
              name: '⏳ In Progress',
              tasks: [
                {
                  _id: '6519418024dcd715e1b25f3f',
                  text: 'Code fun projects 💻',
                },
              ],
            },
            {
              _id: '651952a7e8b0a1d2519bf4bd',
              name: '✅ Done',
              tasks: [
                { _id: '6519418024dcd715e1b25f4f', text: 'Drink coffee 🍵' },
                { _id: '6519418024dcd715e1b25f7f', text: 'Stretch 🏃' },
                { _id: '6519418024dcd715e1b25f6f', text: 'Wake up 🌞' },
              ],
            },
          ],

          addLane() {
            return {
              lanes: [...this.lanes, { name: 'New Lane', tasks: [] }],
            };
          },
        },
      });

      // TODO: Preserve some DOM, e.g. focused state
      store.subscribe((model) =>
        document.querySelector('main').replaceChildren(Board(model))
      );
      store.update();
    </script>
  </body>
</html>
